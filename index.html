<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stacks Magazine</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* This wrapper holds the loader iframe */
    #loader-wrapper {
      position: fixed;
      inset: 0;
      z-index: 9999;
    }
    
    /* This class will be added by script to hide the loader */
    #loader-wrapper.hidden {
      display: none;
    }

    #loader-wrapper iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body class="index-page">

  <!-- Loader container -->
  <div id="loader-wrapper">
    <iframe src="loader.html" title="Stacks Loader"></iframe>
  </div>

  <!-- Shared nav + footer -->
  <div data-include="nav-footer.html"></div>

  <!-- This is your main website content -->
  <div id="main-content">
    <main class="site-main">
      <section class="issue-block">
        <h2 class="issue-title">The Issue — Fall 2025</h2>

        <div class="issue-content">
          <!-- LEFT: Cover -->
          <div class="issue-cover">
            <a href="article.html">
              <img src="https://placehold.co/900x1200/eeeeee/111111?text=Issue+1+Cover" alt="Cover for Issue 1">
            </a>
          </div>

          <!-- RIGHT: TOC + extra -->
          <div class="issue-toc">
            <h3>In This Issue</h3>
            <ul>
              <li><a href="article.html"><span class="toc-category">On Background</span><span class="toc-title">Title Placeholder</span></a></li>
              <li><a href="article.html"><span class="toc-category">Off the Record</span><span class="toc-title">Title Placeholder</span></a></li>
              <li><a href="article.html"><span class="toc-category">Commentary</span><span class="toc-title">Title Placeholder</span></a></li>
              <li><a href="article.html"><span class="toc-category">Notes</span><span class="toc-title">Title Placeholder</span></a></li>
              <li><a href="article.html"><span class="toc-category">Photo Essay</span><span class="toc-title">Title Placeholder</span></a></li>
              <li><a href="article.html"><span class="toc-category">From the Stacks</span><span class="toc-title">Title Placeholder</span></a></li>
            </ul>

            <div class="editor-note">
              <h3>Editor’s Note</h3>
              <p>Our first issue maps a campus by its small frictions — stairwells, coffee lines, and the doors you pass without noticing.</p>
            </div>

            <div class="mission-statement">
              <h3>Mission Statement</h3>
              <p>We publish work that takes place seriously. The city and the university are not just settings; they are systems that shape who gets seen and why.</p>
            </div>
          </div>
        </div>

        <!-- Full-width extras -->
        <div class="editor-note">
          <h3>From the Managing Editor</h3>
          <p>We’re experimenting in public — with formats, with beats, with a slower cadence. Tell us what lands.</p>
        </div>

        <div class="mission-statement">
          <h3>On Archives & Ephemera</h3>
          <p>We’re building an index that prizes primary documents and everyday testimony. The stacks are shelves and also layers — history, policy, memory — and we’re trying to read across them.</p>
        </div>
      </section>
    </main>
  </div>

  <script>
    const loaderWrapper = document.getElementById('loader-wrapper');

    // Listen for the message from loader.html
    window.addEventListener('message', (event) => {
      // When the loader is finished, hide its container.
      if (event.data === 'hideLoader') {
        loaderWrapper.classList.add('hidden');
      }
    });
  </script>

  <!-- Simple HTML partial include loader -->
  <script>
  (async function includePartials(){
    const nodes = document.querySelectorAll('[data-include]');
    for (const host of nodes){
      const file = host.getAttribute('data-include');
      const res  = await fetch(file);
      const html = await res.text();
      host.innerHTML = html;
      host.querySelectorAll('script').forEach(old => {
        const s = document.createElement('script');
        if (old.src) s.src = old.src;
        else s.textContent = old.textContent;
        document.body.appendChild(s);
        old.remove();
      });
    }
  })();
  </script>
</body>
</html>

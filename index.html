<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stacks Magazine</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="icon" type="image/png" href="stacks-logo-favicon.png">

  <!-- Index-only styles -->
  <style>
    /* Background image only for the index page */
    body.index-page::after{
      content:""; position:fixed; inset:0; z-index:-2;
      background:center/cover no-repeat url('index-bg.jpg'); opacity:.25
    }

    /* Layout frame for index content */
    .site-main{padding:2rem;max-width:1400px;margin:0 auto}
    .issue-block{padding:2rem 0;}
    .issue-block:last-of-type{border-bottom:none}

    /* Two-column hero: cover | toc */
    .issue-content{
      display:grid; grid-template-columns:1fr; gap:1.5rem; font-size:1rem;
    }

@media (min-width:1024px){
  /* two equal columns, stretch both sides to the same row height */
  .issue-content{
    grid-template-columns:1fr 1fr;
    gap:1.5rem;
    align-items:stretch; /* forces both columns to the same row height */
  }

  /* Make the cover column stretch and crop internally */
  .issue-cover{
    display:flex;           /* lets the child fill the full column height */
    overflow:hidden;        /* crop edges when we "cover" + tiny zoom */
  }

  /* Fill the entire area, match .issue-toc height, allow slight zoom */
  .issue-cover img{
    width:100%;
    height:100%;            /* key: matches .issue-toc because columns stretch */
    object-fit:cover;       /* fill the box; no empty space */
    object-position:center; /* center crop */
    max-height:none;        /* override the mobile cap */
    transform:scale(1.03);  /* tiny zoom to guarantee edge-to-edge fill */
  }
}

    
    .issue-cover img{width:100%;height:auto;max-height:80vh;object-fit:contain}

    /* TOC: allow multiple titles per category (no lines between titles) */
    .issue-toc{font-size:1.2rem; display:flex; flex-direction:column; line-height: 1.3;}
    .issue-toc h2{margin:0 0 1rem; font-size: 1.25rem;}
    .issue-toc ul{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:.75rem; }
    .issue-toc li{ padding:.5rem 0; }
    .issue-toc li:last-child{ border-bottom:none; }
    .toc-category{ display:block; font-size:.8rem; color:var(--color-subtle); margin-bottom:.25rem; }
    .toc-title{ font-size: 1.3rem; display:block; font-weight:700; font-family:var(--font-sans); padding:.88rem .25rem .25rem 0; border-bottom:1px solid var(--color-border)}
    .issue-toc a.toc-title:hover{ font-style:italic; }
        /* Add this new rule to remove the border from the very last title */
.issue-toc li:last-child .toc-title:last-child {
  border-bottom: none;
}

    /* “about stacks” box: centered and wider */
    .mission-statement {
      margin-top: 0.25rem;
  }

  .about-statement {
    margin-top: 0.25rem;
}
  
  @media (min-width: 1024px) {
      .mission-statement {
          max-width: 80%; 
          margin: 0.5rem auto 0; 
          padding-top: 0.5rem; 
          text-align: center; 
          font-size: 1.25rem;
      }
  }

  @media (min-width: 1024px) {
    .about-statement {
        max-width: 80%; 
        margin: 0.25rem auto 0; 
        padding-top: 1.5rem; 
        text-align: center; 
        font-size: 1.25rem;
        border-bottom: 1px solid var(--color-border);
    }
}
  
  .mission-statement .about-statement h2 {
      margin: 0 0 0.05rem; /* Decreased bottom margin */
      font-size: 1.25rem; 
      font-family: var(--font-sans); 
  }
  
  .mission-statement.about-statement p {
      margin: 0; /* Ensure there's no margin on the paragraph */
  }

  </style>

  <!-- Loader iframe wrapper (index-only) -->
  <style>
    #loader-wrapper{position:fixed; inset:0; z-index:9999; transition:opacity .35s ease, visibility .35s ease}
    #loader-wrapper.hidden{opacity:0; visibility:hidden}
    #loader-wrapper iframe{width:100%; height:100%; border:0; display:block}
    #main-content{opacity:0; transform:translateY(6px); transition: opacity .35s ease, transform .35s ease}
    #main-content.fading{opacity:.95; transform:translateY(0)}
    #main-content.visible{opacity:1; transform:translateY(0)}
    /* If we've already shown the loader this session, skip it entirely */
  html.skip-loader #loader-wrapper { display: none !important; }
  html.skip-loader #main-content   { opacity: 1 !important; transform: none !important; }

  </style>

  <script>
    /* Loader: play only once per session */
    (function () {
      try {
        if (sessionStorage.getItem('stacksLoaderShown')) {
          document.documentElement.classList.add('skip-loader');
        }
      } catch (e) {}
    })();
    </script>
</head>
<body class="index-page">

  <!-- Loader -->
  <div id="loader-wrapper" aria-hidden="true">
    <iframe src="loader.html" title="Stacks Loader"></iframe>
  </div>

  <!-- Shared nav + footer -->
  <div data-include="nav-footer.html"></div>

  <!-- Main content -->
  <div id="main-content" aria-live="polite">
    <main class="site-main">
      <section class="issue-block">
        <div class="issue-content">
          <!-- LEFT: Cover -->
          <div class="issue-cover">
              <img src="issue-1-cover.png" alt="Cover for Issue 1">
          </div>

          <!-- RIGHT: TOC (grouped by category; multiple titles per group) -->
          <div class="issue-toc">
            <h2>In This Issue</h2>
            <ul>
              <li class="toc-group">
                <span class="toc-category">Headlines</span>
                <a class="toc-title" href="a-who-holds-the-cards.html">Who holds the cards?
                  <br><span style="font-size:.8em; font-weight:500; line-height:1.2; display:inline-block; font-style: italic">In conversation with Rich Lyons and Abigail Verino on the state of UC Berkeley</a>

                <a class="toc-title" href="a-agentic-ai-summit.html">Agents of abundance and the apocalypse
                <br><span style="font-size:.8em; font-weight:500; line-height:1.2; display:inline-block; font-style: italic">My day at an agentic AI summit</a>


                <a class="toc-title" href="a-sex-huey-newton.html">Sex, Huey Newton and the National Guard
                <br><span style="font-size:.8em; font-weight:500; line-height:1.2; display:inline-block; font-style: italic">My time with the Berkeley Barb</a>

                <a class="toc-title" href="a-progressive-aesthetics.html">Progressive aesthetics, nostalgic realities
                  <br><span style="font-size:.8em; font-weight:500; line-height:1.2; display:inline-block; font-style: italic">Why your rent is $2000</span></a>
              </li>

              <li class="toc-group">
                <span class="toc-category">Off the Record</span>
                <a class="toc-title" href="a-world-of-mouth.html">World of mouth</a>
                <a class="toc-title" href="a-i-used-chat.html">I used ChatGPT to resurrect my dead dad</a>
              </li>

              <li class="toc-group">
                <span class="toc-category">Notes</span>
                <a class="toc-title" href="a-the-berkeley-womens.html">The Berkeley Women’s Music Collective never really ended</a>
              </li>

              <li class="toc-group">
                <span class="toc-category">From the Stacks</span>
                <a class="toc-title" href="a-from-the-stacks.html">Daily Cal Archives: Oski sued, Main Stacks moves underground</a>
              </li>
            </ul>
          </div>
        </div>

        <!-- “about stacks” (renamed & centered; wider) -->
        <div class="about-statement">
          <h2>About</h2>
          <p><i>Stacks</i> is The Daily Californian’s official magazine. It’s home to longform journalism, commentaries, creative writing and more. <i>Stacks</i> is an archive of Berkeley as it is, as we think it is and as we want it to be.</p>
        </div>

        <div class="mission-statement">
          <h2>Submit</h2>
          <p>To pitch or submit work to <i>Stacks</i> email <a href="mailto:stacks@dailycal.org">stacks@dailycal.org</a>. 
            We’re looking for commentaries, essays, reviews, satires, and more. We especially love work that highlights new or misunderstood aspects of Berkeley and the Bay Area. </p>
        </div>

    </main>
  </div>

  <script>
    const loaderWrapper = document.getElementById('loader-wrapper');
    const mainContent   = document.getElementById('main-content');
  
    let began = false;
    function startContentFade(){
      if (began) return;
      began = true;
      mainContent.classList.add('fading');
      setTimeout(()=> mainContent.classList.add('visible'), 450);
    }
  
    // If we've marked this session to skip the loader, immediately show content.
    if (document.documentElement.classList.contains('skip-loader')) {
      if (loaderWrapper) loaderWrapper.classList.add('hidden');
      startContentFade();
    }
  
    window.addEventListener('message', (event) => {
      if (event.data === 'beginFade'){ startContentFade(); }
      if (event.data === 'hideLoader'){
        if (loaderWrapper) loaderWrapper.classList.add('hidden');
        startContentFade();
        // Mark as shown so we skip the loader next time this session.
        try { sessionStorage.setItem('stacksLoaderShown', '1'); } catch (e) {}
      }
    });
  
    // Include partials (nav + footer)
    (async function includePartials(){
      const nodes = document.querySelectorAll('[data-include]');
      for (const host of nodes){
        const file = host.getAttribute('data-include');
        const res  = await fetch(file);
        const html = await res.text();
        host.innerHTML = html;
  
        // Re-run any scripts inside the partial
        host.querySelectorAll('script').forEach(old => {
          const s = document.createElement('script');
          if (old.src) s.src = old.src;
          else s.textContent = old.textContent;
          document.body.appendChild(s);
          old.remove();
        });
      }
    })();
  </script>
  

</body>
</html>
